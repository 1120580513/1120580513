# 硬件

### 总线

> 贯穿整个系统的电子管道，负责在和部件间传递字节信息

### I/O 设备

> 系统与外部的联系通道(如：键盘、鼠标 显示器、磁盘)，每个 I/O 设备都通过一个控制器或适配器与 I/O 总线相连(控制器是 I/O 设备本身或主板上的芯片组，适配器则是插在主板上的卡)

### 主存

> 临时的存储设备,在处理器执行程序时,用来存放程序和程序处理的数据,由一组动态随机存取存储器(DRAM)组成,是一个线性字节数组

### 处理器

> 中央处理单元(CPU),执行存储在主存中存储的引擎,核心是大小为一字的存储设备(或寄存器),称为程序计数器(PC)

## 存储设备结构

1. `L0(寄存器)`：_保存来自高速缓存存储器的字节_
2. `L1(L1高速缓存:SRAM)`：_保存取自 L2 的高速缓存行_
3. `L2(L2高速缓存:SRAM)`：_保存取自 L3 的高速缓存行_
4. `L3(L3高速缓存:SRAM)`：_保存取自主存的高速缓存行_
5. `L4(主存)`：_保存取自本地磁盘的磁盘块_
6. `L5(本地二级存储:本地磁盘)`：_保存取自远程服务器上的磁盘文件_
7. `L6(远程二级服务器)`

## 存储器层次结构

### 易失性存储器

- 只要有电 SRAM 就会保持不变，DRAM 需要刷新(如果漏电,DRAM 单元会在 10~100 毫秒内失去电荷,内存系统必须周期的读出,然后重写来刷新每一位)，SRAM 的存取比 DRAM 快约 10 倍，代价是 SRAM 单元比 DRAM 单元使用更多晶体管，密集度低，更贵，功率更大

### 非易失性存储器

- PROM(可编程 ROM)只能被编程一次
- EPROM(可擦写 ROM)被擦除和重编程达 1000 次
- EEPROM(电子可擦写 ROM)类似 EPROM，可印在电路卡上编程
- flash memory(闪存)基于 EEPROM
- SSD(固态硬盘)基于闪存的磁盘驱动器
- 磁盘由盘片构成，一个盘片由两个表面，每个表面由一级磁道的同心圆组成，每个磁道被分为一组扇区，扇区由一组间隔分开，间隔用来标识格式化位

| 类型        | 缓存内容    | 缓存位置               | 延迟(周期数) | 由谁管理   |
| ----------- | ----------- | ---------------------- | ------------ | ---------- |
| CPU 寄存器  | 4 或 8 字节 | 芯片上的 CPU 寄存器    | 0            | 编译器     |
| TLB         | 地址翻译    | 芯片上的 TLB           | 0            | 硬件 MMU   |
| L1 高速缓存 | 64 字节块   | 芯片上的 L1 的高速缓存 | 4            | 硬件       |
| L2 高速缓存 | 64 字节块   | 芯片上的 L2 的高速缓存 | 10           | 硬件       |
| L3 高速缓存 | 64 字节块   | 芯片上的 L3 的高速缓存 | 50           | 硬件       |
| 虚拟内存    | 4KB 页      | 主存                   | 200          | 硬件 + OS  |
| 缓冲区缓存  | 部分文件    | 主存                   | 200          | OS         |
| 磁盘缓存    | 硬盘扇区    | 磁盘控制器             | 100 000      | 控制器固件 |
| 网络缓存    | 部分文件    | 本地磁盘               | 10 000 000   | NFS 客户   |
