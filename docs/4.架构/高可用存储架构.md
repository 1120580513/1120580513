# 高可用存储架构

## 主备

> 备机主要起到备份作用，需要人工修改主机为备机

## 主从

> 主机负责读写操作，从机只负责读操作

## 切换

> 系统自动决定主机角色，并完成角色切换，以解决主备和主从故障后的问题

### 互连式

> 主备机直接建立状态传递

### 中介式

> 引入第三方中介，主备不直接联系

### 模拟式

> 备机模拟成一个客户端，向主机发起模拟的读写操作，根据读写操作的响应情况来判断主机状态

## 主主

> 两台机器都是主机，适用于临时性、可丢失、可覆盖的数据

## 集群

### 数据集中式集群

> 1 主多从，数据都只往主机中写

### 数据分散集群

> 每台服务器保存部分数据，同时可备份部分数据

## 分区

> 以上都是基于部分硬件可能损坏的情况下的高可用解决方案，分区是为某个地区所有的硬件操作的情况下的解决方案

### 集中式

> 所有的分区数据都将备份到备份中心

### 互备式

> 每个分区备份另一个分区的数据

### 独立式

> 每个分区有自己独立的备份中心

## 异地多活

> 不同地理位置上的系统都能提供服务，架构分为同城异区、跨城异地、跨国异地

1. 保证核心业务的异地多活
2. 保证核心数据最终一致性
3. 采用多种手段同步数据
4. 只保证绝大部分用户的异地多活